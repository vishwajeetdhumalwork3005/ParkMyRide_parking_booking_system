{% extends 'base.html' %}
{% block title %}Manage Slots - ParkMyRide Admin{% endblock %}
{% block content %}
<h2>ğŸ…¿ï¸ Manage Parking Slots</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem; max-width: 1200px;">
  <div>
    <div style="background: #fff; padding: 1.5rem; border-radius: 8px; border: 1px solid var(--gray-200);">
      <h3>â• Add New Slot</h3>
      
      <form method="post" action="">
        {% csrf_token %}
        <input type="hidden" name="action" value="add">
        
        <label for="location_name">ğŸ“ Location Name</label>
        <input type="text" id="location_name" name="location_name" required placeholder="e.g., Downtown Mall">
        
        <label for="slot_name">ğŸ…¿ï¸ Slot Name</label>
        <input type="text" id="slot_name" name="slot_name" required placeholder="e.g., Lot A1">
        
        <label for="vehicle_type">ğŸš— Vehicle Type</label>
        <select id="vehicle_type" name="vehicle_type">
          <option value="Car">ğŸš— Car</option>
          <option value="Bike">ğŸï¸ Bike</option>
           <option value="Cycle">ğŸš² Cycle</option>
        </select>
        
        <label for="hourly_price">ğŸ’µ Hourly Price</label>
        <input type="number" id="hourly_price" name="hourly_price" step="0.01" required placeholder="50">
        
        <div class="form-actions">
          <button class="btn green" type="submit" style="width: 100%;">â• Add Slot</button>
        </div>
      </form>
    </div>
  </div>
  
  <div>
    <div style="background: var(--gray-50); padding: 1.5rem; border-radius: 8px; border-left: 4px solid var(--teal);">
      <h3 style="margin-top: 0;">ğŸ’¡ Quick Tips</h3>
      <ul style="margin: 1rem 0; padding-left: 1.5rem; color: var(--gray-700);">
        <li>Use clear, descriptive names for locations and slots</li>
        <li>Set competitive hourly rates based on demand</li>
        <li>Regularly review and update pricing</li>
        <li>Ensure all vehicle types are available</li>
      </ul>
    </div>
  </div>
</div>

<h3 style="margin-top: 2rem; margin-bottom: 1rem;">ğŸ“„ Existing Slots ({{ slots|length }})</h3>
{% if slots %}
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>ğŸ…¿ï¸ Slot</th>
        <th>ğŸ“ Location</th>
        <th>ğŸš— Type</th>
        <th>ğŸ’µ Price</th>
        <th>âš™ï¸ Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in slots %}
      <tr>
        <td>#{{ s.id }}</td>
        <td><strong>{{ s.slot_name }}</strong></td>
        <td>{{ s.location.name }}</td>
        <td><span class="badge available">{{ s.vehicle_type }}</span></td>
        <td><strong style="color: var(--teal);">{{ s.hourly_price|inr }}/hr</strong></td>
        <td>
          <form method="post" style="display:inline">
            {% csrf_token %}
            <input type="hidden" name="action" value="delete">
            <input type="hidden" name="slot_id" value="{{ s.id }}">
            <button class="btn small" type="submit" style="background: #fee2e2; color: #7f1d1d;" onclick="return confirm('Are you sure you want to delete this slot?');">í‰ª Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div style="text-align: center; padding: 2rem; background: #fff; border-radius: 8px; border: 1px solid var(--gray-200);">
  <p style="color: var(--gray-700);">No slots found. Add your first parking slot using the form above.</p>
</div>
{% endif %}

<style>
  @media (max-width: 768px) {
    div[style*="grid-template-columns: 1fr 1fr"] {
      grid-template-columns: 1fr !important;
    }
  }
</style>
{% endblock %}
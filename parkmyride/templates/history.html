{% extends 'base.html' %}
{% block title %}My Bookings - ParkMyRide{% endblock %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
  <h2>ðŸ“‹ My Bookings</h2>
  <a href="/search/" class="btn book">+ New Booking</a>
</div>

{% if bookings %}
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Slot</th>
        <th>Location</th>
        <th>Status</th>
        <th>Amount</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for b in bookings %}
      <tr>
        <td><strong>{{ b.start_time.date }}</strong></td>
        <td>{{ b.slot.slot_name }}</td>
        <td>{{ b.slot.location.name }}</td>
        <td>
          {% if b.status == 'Confirmed' %}
            <span class="badge available">âœ“ Confirmed</span>
          {% elif b.status == 'Cancelled' %}
            <span class="badge busy">âœ— Cancelled</span>
          {% else %}
            <span class="badge">{{ b.status }}</span>
          {% endif %}
        </td>
        <td><strong>{{ b.total_price|inr }}</strong></td>
        <td>
          <a href="/book/confirm/{{ b.id }}/" class="btn small" title="View booking details">View</a>
          {% if b.status != 'Cancelled' %}
            <a href="/cancel/{{ b.id }}/" class="btn small" style="background: #fee2e2; color: #7f1d1d;" onclick="return confirm('Are you sure you want to cancel this booking?');" title="Cancel this booking">Cancel</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div style="text-align: center; padding: 3rem 1rem; background: #fff; border-radius: 8px; border: 1px solid var(--gray-200);">
  <p style="font-size: 1.1rem; color: var(--gray-700); margin: 1rem 0;">No bookings found yet.</p>
  <a href="/search/" class="btn book">Search & Book a Parking Slot</a>
</div>
{% endif %}

<style>
  .table-responsive {
    overflow-x: auto;
  }
</style>
{% endblock %}